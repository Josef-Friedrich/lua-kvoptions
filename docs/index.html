<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>The luakeys package</title>
    <link rel="stylesheet" href="ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>luakeys</h1>


<h2>Contents</h2>
<ul>
<li><a href="#Fields">Fields</a></li>
<li><a href="#Local_Functions">Local Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><strong>luakeys</strong></li>
</ul>

</div>

<div id="content">

<h1>Module <code>luakeys</code></h1>
<p>A naive key value parser written with Lpeg to get rid of kvoptions.</p>
<p><ul>
<li><code>patt<sup>0</sup></code> = <code>expression *</code> (peg.js)</li>
<li><code>patt<sup>1</sup></code> = <code>expression +</code> (peg.js)</li>
<li><code>patt^-1</code> = <code>expression ?</code> (peg.js)</li>
<li><code>patt1 * patt2</code> = <code>expression1 expression2</code> (peg.js) -> Sequence</li>
<li><p><code>patt1 + patt2</code> = <code>expression1 / expression2</code> (peg.js) -> Ordered choice</p></li>
<li><p><a href="https://tug.org/TUGboat/tb40-2/tb125menke-lpeg.pdf">TUGboat article: Parsing complex data formats in LuaTEX with LPEG</a></p></li>
<li><a href="https://github.com/lualatex/lualibs/blob/master/lualibs-util-dim.lua">Dimension handling in lualibs</a></li>
</ul>


<pre>
<span class="keyword">local</span> defintions = {
  <span class="comment">-- data types:
</span>  key_integer = {
    data_type = <span class="string">'integer'</span>,
  },
  <span class="comment">-- 1.1 +1.1 -1.1 11e-02
</span>  key_float = {
    data_type = <span class="string">'float'</span>,
  },
  <span class="comment">-- true: true TRUE yes YES 1, false: false FALSE no NO 0
</span>  key_boolean = {
    data_type = <span class="string">'boolean'</span>,
  },
  key_dimension = {
    data_type = <span class="string">'dimension'</span>,
  },
  keyonly = {
    data_type = <span class="string">'keyonly'</span>
  },

  <span class="comment">-- kas=true -&gt; key_alias_single=true
</span>  key_alias_single = {
    data_type = <span class="string">'boolean'</span>,
    alias = <span class="string">'kas'</span>, <span class="comment">-- String -&gt; single alias
</span>  },
  <span class="comment">-- kam=true or k=true -&gt; key_alias_multiple=true
</span>  key_alias_multiple = {
    data_type = <span class="string">'boolean'</span>,
    alias = { <span class="string">'kam'</span>, <span class="string">'k'</span> }, <span class="comment">-- Table -&gt; multiple aliases (long alias first)
</span>  },
  key_default = {
    data_type = <span class="string">'boolean'</span>,
    default = <span class="keyword">true</span>
  },
  <span class="comment">-- old_key=1 -&gt; new_key=1
</span>  old_key = {
    data_type = <span class="string">'integer'</span>
    rename_key = <span class="string">'new_key'</span>
  }
  <span class="comment">-- key_overwrite_value=1 -&gt; key_overwrite_value=2
</span>  key_overwrite_value = {
    data_type = <span class="string">'integer'</span>
    overwrite_value = <span class="number">2</span>
  }
}
</pre>
</p>


<h2><a href="#Fields">Fields</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Pattern">Pattern</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-p">lpeg.P</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Range">Range</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-r">lpeg.R</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Set">Set</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-s">lpeg.S</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#capture">capture</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-c">lpeg.C</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#capture_table">capture_table</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-t">lpeg.Ct</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#capture_fold">capture_fold</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-f">lpeg.Cf</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#capture_group">capture_group</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-g">lpeg.Cg</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#capture_constant">capture_constant</a></td>
	<td class="summary">See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-cc">lpeg.Cg</a></td>
	</tr>
</table>
<h2><a href="#Local_Functions">Local Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#data_type_boolean">data_type_boolean ()</a></td>
	<td class="summary">Define data type boolean.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#data_type_integer">data_type_integer ()</a></td>
	<td class="summary">Define data type integer.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#data_type_float">data_type_float ()</a></td>
	<td class="summary">Define data type integer.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#data_type_dimension">data_type_dimension ()</a></td>
	<td class="summary">Define data type dimension.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#data_type_string">data_type_string ()</a></td>
	<td class="summary">Define data type string.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#build_single_key_value_definition">build_single_key_value_definition (key, definition)</a></td>
	<td class="summary"></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#build_defaults_table">build_defaults_table (definitions)</a></td>
	<td class="summary">Build a table with the default values.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#build_parser">build_parser (definitions)</a></td>
	<td class="summary">Build a key value parser using Lpeg.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Fields"></a>Fields</h2>

    <dl class="function">
    <dt>
    <a name = "Pattern"></a>
    <strong>Pattern</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-p">lpeg.P</a>  Like <code>&quot;literal&quot;</code> in peg.js.







</dd>
    <dt>
    <a name = "Range"></a>
    <strong>Range</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-r">lpeg.R</a>  Like <code>[a-z]</code> in peg.js.







</dd>
    <dt>
    <a name = "Set"></a>
    <strong>Set</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#op-s">lpeg.S</a>  Like <code>[characters]</code> in peg.js.







</dd>
    <dt>
    <a name = "capture"></a>
    <strong>capture</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-c">lpeg.C</a>







</dd>
    <dt>
    <a name = "capture_table"></a>
    <strong>capture_table</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-t">lpeg.Ct</a>







</dd>
    <dt>
    <a name = "capture_fold"></a>
    <strong>capture_fold</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-f">lpeg.Cf</a>







</dd>
    <dt>
    <a name = "capture_group"></a>
    <strong>capture_group</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-g">lpeg.Cg</a>







</dd>
    <dt>
    <a name = "capture_constant"></a>
    <strong>capture_constant</strong>
    </dt>
    <dd>
    See <a href="http://www.inf.puc-rio.br/~roberto/lpeg#cap-cc">lpeg.Cg</a>







</dd>
</dl>
    <h2 class="section-header "><a name="Local_Functions"></a>Local Functions</h2>

    <dl class="function">
    <dt>
    <a name = "data_type_boolean"></a>
    <strong>data_type_boolean ()</strong>
    </dt>
    <dd>
    Define data type boolean.



    <h3>Returns:</h3>
    <ol>

        Lpeg patterns
    </ol>




</dd>
    <dt>
    <a name = "data_type_integer"></a>
    <strong>data_type_integer ()</strong>
    </dt>
    <dd>
    Define data type integer.



    <h3>Returns:</h3>
    <ol>

        Lpeg patterns
    </ol>




</dd>
    <dt>
    <a name = "data_type_float"></a>
    <strong>data_type_float ()</strong>
    </dt>
    <dd>
    Define data type integer.



    <h3>Returns:</h3>
    <ol>

        Lpeg patterns
    </ol>




</dd>
    <dt>
    <a name = "data_type_dimension"></a>
    <strong>data_type_dimension ()</strong>
    </dt>
    <dd>
    Define data type dimension.



    <h3>Returns:</h3>
    <ol>

        Lpeg patterns
    </ol>




</dd>
    <dt>
    <a name = "data_type_string"></a>
    <strong>data_type_string ()</strong>
    </dt>
    <dd>
    Define data type string.



    <h3>Returns:</h3>
    <ol>

        Lpeg patterns
    </ol>




</dd>
    <dt>
    <a name = "build_single_key_value_definition"></a>
    <strong>build_single_key_value_definition (key, definition)</strong>
    </dt>
    <dd>



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>

        </li>
        <li><span class="parameter">definition</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         keys: alias, type
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">userdata</span></span>
        Lpeg patterns etc.
    </ol>




</dd>
    <dt>
    <a name = "build_defaults_table"></a>
    <strong>build_defaults_table (definitions)</strong>
    </dt>
    <dd>
    Build a table with the default values.  They are indexed by the key
 name.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">definitions</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        defaults
    </ol>




</dd>
    <dt>
    <a name = "build_parser"></a>
    <strong>build_parser (definitions)</strong>
    </dt>
    <dd>
    Build a key value parser using Lpeg.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">definitions</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">parser</span></span>
        The Lpeg parser</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        defaults</li>
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-07-11 21:30:50 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
