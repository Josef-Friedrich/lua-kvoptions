<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>The luakeys package</title>
    <link rel="stylesheet" href="ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>luakeys</h1>



<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
<li><a href="#Fields">Fields</a></li>
<li><a href="#Local_Functions">Local Functions</a></li>
<li><a href="#Convert_back_to_strings">Convert back to strings </a></li>
<li><a href="#Parser___Lpeg_related">Parser / Lpeg related </a></li>
<li><a href="#Store_results">Store results </a></li>
<li><a href="#Exports">Exports </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><strong>luakeys</strong></li>
</ul>

</div>

<div id="content">

<h1>Module <code>luakeys</code></h1>
<p>Get the size of an array like table <code>{ &apos;one&apos;, &apos;two&apos;, &apos;three&apos; }</code> = 3.</p>
<p>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#get_table_size">get_table_size (value)</a></td>
	<td class="summary">Get the size of a table <code>{ one = &apos;one&apos;, &apos;two&apos;, &apos;three&apos; }</code> = 3.</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#all_options">all_options</a></td>
	<td class="summary">This table stores all allowed option keys.</td>
	</tr>
</table>
<h2><a href="#Fields">Fields</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#default_options">default_options</a></td>
	<td class="summary">The default options.</td>
	</tr>
</table>
<h2><a href="#Local_Functions">Local Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#merge_tables">merge_tables (target, t2)</a></td>
	<td class="summary">https://stackoverflow.com/a/1283608/10193818</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#clone_table">clone_table (orig)</a></td>
	<td class="summary">http://lua-users.org/wiki/CopyTable</td>
	</tr>
</table>
<h2><a href="#Convert_back_to_strings">Convert back to strings </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#render">render (result)</a></td>
	<td class="summary">The function <code>render(tbl)</code> reverses the function
  <code>parse(kv_string)</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#stringify">stringify (result, for_tex)</a></td>
	<td class="summary">The function <code>stringify(tbl, for_tex)</code> converts a Lua table into a
   printable string.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#debug">debug (result)</a></td>
	<td class="summary">The function <code>debug(tbl)</code> pretty prints a Lua table to standard
   output (stdout).</td>
	</tr>
</table>
<h2><a href="#Parser___Lpeg_related">Parser / Lpeg related </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#generate_parser">generate_parser (initial_rule, convert_dimensions)</a></td>
	<td class="summary">Generate the PEG parser using Lpeg.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#ws">ws (match)</a></td>
	<td class="summary">Match literal string surrounded by whitespace</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#add_to_table">add_to_table (table, arg1, arg2)</a></td>
	<td class="summary">Add values to a table in two modes:</p>

<p> # Key value pair</p>

<p> If arg1 and arg2 are not nil, then arg1 is the key and arg2 is the
 value of a new table entry.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#apply_definitions">apply_definitions (defs, opts, input, output, unknown, key_path, input_root)</a></td>
	<td class="summary">Apply the key-value-pair definitions (defs) on an input table in a
 recursive fashion.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#input">input</a></td>
	<td class="summary">standalone values are removed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#parse">parse (kv_string, opts)</a></td>
	<td class="summary">Parse a LaTeX/TeX style key-value string into a Lua table.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#normalize_opts">normalize_opts (opts)</a></td>
	<td class="summary">Normalize the parse options.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#apply_opts">apply_opts (result, opts)</a></td>
	<td class="summary">Normalize the result table of the LPeg parser.</td>
	</tr>
</table>
<h2><a href="#Store_results">Store results </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#result_store">result_store</a></td>
	<td class="summary">A table to store parsed key-value results.</td>
	</tr>
</table>
<h2><a href="#Exports">Exports </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#opts">opts</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#stringify">stringify</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#parse">parse</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#render">render</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#debug">debug</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#save">save (identifier, result)</a></td>
	<td class="summary">The function <code>save(identifier, result): void</code> saves a result (a
  table from a previous run of <a href="index.html#parse">parse</a>) under an identifier.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get">get (identifier)</a></td>
	<td class="summary">The function <code>get(identifier): table</code> retrieves a saved result
  from the result store.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "get_table_size"></a>
    <strong>get_table_size (value)</strong>
    </dt>
    <dd>
    Get the size of a table <code>{ one = &apos;one&apos;, &apos;two&apos;, &apos;three&apos; }</code> = 3.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A table or any input.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        The size of the array like table. 0 if the input is
 no table or the table is empty.
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Tables"></a>Tables</h2>

    <dl class="function">
    <dt>
    <a name = "all_options"></a>
    <strong>all_options</strong>
    </dt>
    <dd>
    This table stores all allowed option keys.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">convert_dimensions</span>



        </li>
        <li><span class="parameter">debug</span>



        </li>
        <li><span class="parameter">default</span>



        </li>
        <li><span class="parameter">defaults</span>



        </li>
        <li><span class="parameter">defs</span>



        </li>
        <li><span class="parameter">format_keys</span>



        </li>
        <li><span class="parameter">hooks</span>



        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Fields"></a>Fields</h2>

    <dl class="function">
    <dt>
    <a name = "default_options"></a>
    <strong>default_options</strong>
    </dt>
    <dd>
    The default options.







</dd>
</dl>
    <h2 class="section-header "><a name="Local_Functions"></a>Local Functions</h2>

    <dl class="function">
    <dt>
    <a name = "merge_tables"></a>
    <strong>merge_tables (target, t2)</strong>
    </dt>
    <dd>
    https://stackoverflow.com/a/1283608/10193818


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">target</span>



        </li>
        <li><span class="parameter">t2</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "clone_table"></a>
    <strong>clone_table (orig)</strong>
    </dt>
    <dd>
    http://lua-users.org/wiki/CopyTable


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">orig</span>



        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Convert_back_to_strings"></a>Convert back to strings </h2>

    <dl class="function">
    <dt>
    <a name = "render"></a>
    <strong>render (result)</strong>
    </dt>
    <dd>
    The function <code>render(tbl)</code> reverses the function
  <code>parse(kv_string)</code>.  It takes a Lua table and converts this table
  into a key-value string. The resulting string usually has a
  different order as the input table. In Lua only tables with
  1-based consecutive integer keys (a.k.a. array tables) can be
  parsed in order.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">result</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A table to be converted into a key-value string.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
        A key-value string that can be passed to a TeX
 macro.
    </ol>




</dd>
    <dt>
    <a name = "stringify"></a>
    <strong>stringify (result, for_tex)</strong>
    </dt>
    <dd>
    The function <code>stringify(tbl, for_tex)</code> converts a Lua table into a
   printable string.  Stringify a table means to convert the table into
   a string. This function is used to realize the <a href="index.html#debug">debug</a> function.
   <code>stringify(tbl, true)</code> (<code>for_tex = true</code>) generates a string which
   can be embeded into TeX documents. The macro <code>\luakeysdebug{}</code> uses
   this option. <code>stringify(tbl, false)</code> or <code>stringify(tbl)</code> generate a
   string suitable for the terminal.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">result</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A table to stringify.
        </li>
        <li><span class="parameter">for_tex</span>
            <span class="types"><span class="type">boolean</span></span>
         Stringify the table into a text string that
   can be embeded inside a TeX document via tex.print(). Curly braces
   and whites spaces are escaped.</p>

<p> https://stackoverflow.com/a/54593224/10193818
        </li>
    </ul>





</dd>
    <dt>
    <a name = "debug"></a>
    <strong>debug (result)</strong>
    </dt>
    <dd>
    The function <code>debug(tbl)</code> pretty prints a Lua table to standard
   output (stdout).  It is a utility function that can be used to
   debug and inspect the resulting Lua table of the function
   <a href="index.html#parse">parse</a>. You have to compile your TeX document in a console to
   see the terminal output.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">result</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A table to be printed to standard output for
 debugging purposes.
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Parser___Lpeg_related"></a>Parser / Lpeg related </h2>

    <dl class="function">
    <dt>
    <a name = "generate_parser"></a>
    <strong>generate_parser (initial_rule, convert_dimensions)</strong>
    </dt>
    <dd>

<p>Generate the PEG parser using Lpeg. </p>

<p> Explanations of some LPeg notation forms:</p>

<ul>
    <li><p><code>patt ^ 0</code> = <code>expression *</code></p></li>
    <li><p><code>patt ^ 1</code> = <code>expression +</code></p></li>
    <li><p><code>patt ^ -1</code> = <code>expression ?</code></p></li>
    <li><p><code>patt1 * patt2</code> = <code>expression1 expression2</code>: Sequence</p></li>
    <li><p><code>patt1 + patt2</code> = <code>expression1 / expression2</code>: Ordered choice</p></li>
    <li><p><a href="https://tug.org/TUGboat/tb40-2/tb125menke-Patterndf">TUGboat article: Parsing complex data formats in LuaTEX with LPEG</a></p></li>
</ul>




    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">initial_rule</span>



        </li>
        <li><span class="parameter">convert_dimensions</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">userdata</span></span>
        The parser.
    </ol>




</dd>
    <dt>
    <a name = "ws"></a>
    <strong>ws (match)</strong>
    </dt>
    <dd>
    Match literal string surrounded by whitespace


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">match</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "add_to_table"></a>
    <strong>add_to_table (table, arg1, arg2)</strong>
    </dt>
    <dd>
    Add values to a table in two modes:</p>

<p> # Key value pair</p>

<p> If arg1 and arg2 are not nil, then arg1 is the key and arg2 is the
 value of a new table entry. </p>

<p> # Index value</p>

<p> If arg2 is nil, then arg1 is the value and is added as an indexed
 (by an integer) value.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">table</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>



        </li>
        <li><span class="parameter">arg1</span>
            <span class="types"><span class="type">mixed</span></span>



        </li>
        <li><span class="parameter">arg2</span>
            <span class="types"><span class="type">mixed</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>



    </ol>




</dd>
    <dt>
    <a name = "apply_definitions"></a>
    <strong>apply_definitions (defs, opts, input, output, unknown, key_path, input_root)</strong>
    </dt>
    <dd>
    Apply the key-value-pair definitions (defs) on an input table in a
 recursive fashion.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">defs</span>
         table A table containing all definitions.
        </li>
        <li><span class="parameter">opts</span>
         table The parse options table.
        </li>
        <li><span class="parameter">input</span>
         table The current input table.
        </li>
        <li><span class="parameter">output</span>
         table The current output table.
        </li>
        <li><span class="parameter">unknown</span>
         table Always the root unknown table.
        </li>
        <li><span class="parameter">key_path</span>
         table An array of key names leading to the current
        </li>
        <li><span class="parameter">input_root</span>
         table The root input table
  input and output table.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "input"></a>
    <strong>input</strong>
    </dt>
    <dd>
    standalone values are removed.
 For some callbacks and the third return value of parse, we
 need an unchanged raw result from the parse function.







</dd>
    <dt>
    <a name = "parse"></a>
    <strong>parse (kv_string, opts)</strong>
    </dt>
    <dd>
    Parse a LaTeX/TeX style key-value string into a Lua table.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">kv_string</span>
         string A string in the TeX/LaTeX style key-value format as described above.
        </li>
        <li><span class="parameter">opts</span>
         table A table containing the settings:
   <code>convert_dimensions</code>, <code>unpack</code>, <code>naked_as_value</code>, <code>converter</code>,
   <a href="index.html#debug">debug</a>, <code>preprocess</code>, <code>postprocess</code>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        table result The final result of all individual parsing and normalization steps.</li>
        <li>
        table unknown A table with unknown, undefinied key-value pairs.</li>
        <li>
        table raw The unprocessed, raw result of the LPeg parser.</li>
    </ol>




</dd>
    <dt>
    <a name = "normalize_opts"></a>
    <strong>normalize_opts (opts)</strong>
    </dt>
    <dd>
    Normalize the parse options.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">opts</span>
         table Options in a raw format. The table may be empty or some keys are not set.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table
    </ol>




</dd>
    <dt>
    <a name = "apply_opts"></a>
    <strong>apply_opts (result, opts)</strong>
    </dt>
    <dd>
    Normalize the result table of the LPeg parser.  This normalization
  tasks are performed on the raw input table coming directly from
  the PEG parser:


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">result</span>
         table The raw input table coming directly from the PEG parser
        </li>
        <li><span class="parameter">opts</span>
         table Some options.
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Store_results"></a>Store results </h2>

    <dl class="function">
    <dt>
    <a name = "result_store"></a>
    <strong>result_store</strong>
    </dt>
    <dd>
    A table to store parsed key-value results.







</dd>
</dl>
    <h2 class="section-header "><a name="Exports"></a>Exports </h2>

    <dl class="function">
    <dt>
    <a name = "opts"></a>
    <strong>opts</strong>
    </dt>
    <dd>








    <h3>See also:</h3>
    <ul>
         <a href="index.html#default_options">default_options</a>
    </ul>


</dd>
    <dt>
    <a name = "stringify"></a>
    <strong>stringify</strong>
    </dt>
    <dd>








    <h3>See also:</h3>
    <ul>
         <a href="index.html#stringify">stringify</a>
    </ul>


</dd>
    <dt>
    <a name = "parse"></a>
    <strong>parse</strong>
    </dt>
    <dd>








    <h3>See also:</h3>
    <ul>
         <a href="index.html#parse">parse</a>
    </ul>


</dd>
    <dt>
    <a name = "render"></a>
    <strong>render</strong>
    </dt>
    <dd>








    <h3>See also:</h3>
    <ul>
         <a href="index.html#render">render</a>
    </ul>


</dd>
    <dt>
    <a name = "debug"></a>
    <strong>debug</strong>
    </dt>
    <dd>








    <h3>See also:</h3>
    <ul>
         <a href="index.html#debug">debug</a>
    </ul>


</dd>
    <dt>
    <a name = "save"></a>
    <strong>save (identifier, result)</strong>
    </dt>
    <dd>
    The function <code>save(identifier, result): void</code> saves a result (a
  table from a previous run of <a href="index.html#parse">parse</a>) under an identifier.
  Therefore, it is not necessary to pollute the global namespace to
  store results for the later usage.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">identifier</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The identifier under which the result is
   saved.
        </li>
        <li><span class="parameter">result</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A result to be stored and that was created by
   the key-value parser.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "get"></a>
    <strong>get (identifier)</strong>
    </dt>
    <dd>
    The function <code>get(identifier): table</code> retrieves a saved result
  from the result store.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">identifier</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The identifier under which the result was
   saved.
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2022-06-09 21:14:30 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
